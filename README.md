# promotions-api-client
The API client library for accessing the Promotions API.

## Autogenerated code
The client was automatically generated using version 5.2.1 of the [OpenAPI Generator tool](https://openapi-generator.tech/).
The older version must be used in order to prevent Guzzle 7 Utils functions from being used, as the Website and Megatron codebases are still using Guzzle 6.

### How to regenerate
1. Get the Raw OpenAPI spec https://github.com/Gear4music/backend-app-promotions-api/blob/main/resources/swagger/openapi.yaml and view the raw file to get the URL, example:
```bash
https://raw.githubusercontent.com/Gear4music/backend-app-promotions-api/refs/heads/main/resources/swagger/openapi.yaml?token=<AUTO GENERATED TOKEN FROM GITHUB>
```
2. Create a [personal access token](https://github.com/settings/tokens) that has access to the [gear4music/backend-app-promotions-api](https://github.com/Gear4music/backend-app-promotions-api/) repo and copy it
3. Add the personal access token to the front of the URL like so:
```bash
https://<PERSONAL ACCESS TOKEN>@raw.githubusercontent.com/Gear4music/backend-app-promotions-api/refs/heads/main/resources/swagger/openapi.json?token=<AUTO GENERATED TOKEN FROM GITHUB>
```
4. From the root folder run:
```bash 
docker run --rm \
  -v "${PWD}/src:/out/src" \
  -v "${PWD}/docs:/out/docs" \
  openapitools/openapi-generator-cli:v5.2.1 generate \
  -i https://<PERSONAL ACCESS TOKEN>@raw.githubusercontent.com/Gear4music/backend-app-promotions-api/refs/heads/main/resources/swagger/openapi.yaml?token=<AUTO GENERATED TOKEN FROM GITHUB> \
  -g php \
  -o /out \
  --additional-properties "invokerPackage=Gear4music\PromotionsClient\V1,srcBasePath=src/V1" \
  --api-package PromotionsApi
```
5. Update the wrapper class `src/Api.php` to use any new endpoints

## Usage
```php
<?php
require_once(__DIR__ . '/vendor/autoload.php');

$api = new Gear4music\PromotionsClient\Api(HOST, TOKEN);
$api->getAvailablePromotions(...);
```
